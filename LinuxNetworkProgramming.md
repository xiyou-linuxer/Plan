### 为什么要学习服务器？

当今所有的 IT 行业都需要使用服务器为大量客户提供服务，往往 web 系程序员可以直接使用 nginx, apache 等开源的服务器，而我们 c 系程序员的目标是了解服务器的底层原理，服务器是如何撑住“百万并发”，多进程，多线程，协程 服务器之间区别是什么， reactor/ proactor 模型是什么？epoll 多路 io 复用是什么。

然而只明白服务器原理是并不够的。当前工业界往往需要服务器提供某种服务：数据存储也好，缓存也好，P2P 通信也好，它们都属于业务层需要实现的内容。小组同学在大一暑假的时候会接触到如何使用 epoll 简单实现一个聊天室，大概也能明白业务层和网络层之间的区别。

### 如何学习服务器?

当前最佳的方案是看书和学习（并参与开发）开源项目。如果是  api 上的问题可以 google 其 man 手册或者去 stackoverflow 寻找相关问题。

* 书籍：
1. 《高性能》
2. 《muduo》

* 开源项目：

1. 学习当前流行的开源 web 服务器如 nginx, libuv, libevent，钻研其源码。
2. 学习当前流行的开源项目是如何使用服务器的，如 redis 的网络层是如何实现的，钻研其源码。


### 自我检验 HOMEWORK

在学习完 《高性能》《muduo》两本书后，你的任务是实现一个网络服务器，业务层目标，下面给你罗列了一些，你可以任选一个实现
（也可以有自己的其他 idea）：

* 包装一种通信协议：
e.g.  IRC, HTTPS, RPC, DNS...

* 提高性能的方式：
1. 实现 web 服务器缓存层 (memcached,redis) 
2. io_uring
3. 查找并消除性能瓶颈

* 提供持久性服务：
1. 实现 web 服务器存储层 (haystack) 

* 实现 web 服务器容错服务...

### 如何 DEBUG
1. gdb （比如该怎么给多线程打断点）
2. valgrind（如何检测内存越界，检测线程竞争）
3. asan（同上）

### 如何构建项目
1. cmake
2. bazel

### 如何进行测试
1. 自己写单元测试
2. postman （针对 web 服务器）
3. 自己写的客户端
4. ab 压力测试（针对 web 服务器）

### 如何性能优化

1. 使用服务器工具 ab 等 进行性能测试，对比和 nginx 等开源实现之间的差距。
2. 使用性能测试工具 perf, gperftools, ebpf... 分析服务器的热点，也就是你的服务器的性能瓶颈在哪里，是不必要的字符串拷贝还是某个系统调用卡了太久时间或者是不是该考虑禁用 tcp 的 negle 算法？如何做连接数以及请求上的负载均衡？

### 如何部署
1. docker


在学习完服务器原理以后，恭喜你，你可以去学习一些其他进阶的技术了，比如：

1. 数据库
2. [分布式](DistributedSystems.md)

### 参考资料

- [Favorites/NetworkProgramming.md](https://github.com/xiyou-linuxer/Favorites/blob/master/NetworkProgramming.md)